var send_data={};function resetFilters(){$("#resources").val("all"),getAuthors("all"),send_data.author="",send_data.format="json"}function putTableData(t){let o;t.results.length>0?($("#no_results").hide(),$("#list_data").show(),$("#listing").html(""),$.each(t.results,function(t,e){var a=e.slug;o="<tr> <td>"+e.author+'</td><td title="'+e.title+'">'+e.title.slice(0,50)+"...</td><td>"+e.description+"</td><td>"+e.date_creation.toString()+'</td><td> <a href="'+a+'">Voir</a></td></tr>',$("#listing").append(o)})):($("#no_results h5").html("No results found"),$("#list_data").hide(),$("#no_results").show());let e=t.previous,a=t.next;null===e?($("#previous").addClass("disabled"),$("#previous").prop("disabled",!0)):($("#previous").removeClass("disabled"),$("#previous").prop("disabled",!1)),null===a?($("#next").addClass("disabled"),$("#next").prop("disabled",!0)):($("#next").removeClass("disabled"),$("#next").prop("disabled",!1)),$("#previous").attr("url",t.previous),$("#next").attr("url",t.next),$("#result-count span").html(t.count)}function getAPIData(){let t=$("#list_data").attr("url");$.ajax({method:"GET",url:t,data:send_data,beforeSend:function(){$("#no_results h5").html("Loading data...")},success:function(t){putTableData(t)},error:function(t){$("#no_results h5").html("Something went wrong"),$("#list_data").hide()}})}function getAuthors(){let t=$("#resources").attr("url");$.ajax({method:"GET",url:t,data:{},success:function(t){authorss_option="<option value='all' selected>All authors</option>",$.each(t.authors,function(t,o){authorss_option+="<option>"+o+"</option>"}),$("#resources").html(authorss_option)},error:function(t){console.log(t)}})}function getLevels(){let t=$("#levels").attr("url");$.ajax({method:"GET",url:t,data:{},success:function(t){levels_option="<option value='all' selected>All levels</option>",$.each(t.levels,function(t,o){levels_option+="<option>"+o+"</option>"}),$("#levels").html(levels_option)},error:function(t){console.log(t)}})}function getCourse(){let t=$("#courses").attr("url");$.ajax({method:"GET",url:t,data:{},success:function(t){courses_option="<option value='all' selected>All sectors</option>",$.each(t.courses,function(t,o){courses_option+="<option>"+o+"</option>"}),$("#courses").html(courses_option)},error:function(t){console.log(t)}})}function getTagFamily(){let t=$("#families").attr("url");$.ajax({method:"GET",url:t,data:{},success:function(t){tag_families_option="<option value='all' selected>All problem types</option>",$.each(t.tag_families,function(t,o){tag_families_option+="<option>"+o+"</option>"}),$("#families").html(tag_families_option)},error:function(t){console.log(t)}})}function getLanguage(){let t=$("#languages").attr("url");$.ajax({method:"GET",url:t,data:{},success:function(t){languagess_option="<option value='all' selected>All languages</option>",$.each(t.languages,function(t,o){languagess_option+="<option>"+o+"</option>"}),$("#languages").html(languagess_option)},error:function(t){console.log(t)}})}function getOntology(){let t=$("#ontologies").attr("url");$.ajax({method:"GET",url:t,data:{},success:function(t){ontologies_option="<option value='all' selected>All Ontologies</option>",$.each(t.ontologies,function(t,o){ontologies_option+="<option>"+t+"</option>",Object.entries(o).forEach(([t,o])=>{for(ontologies_option+="<option> &nbsp;&nbsp;&nbsp;&nbsp;"+t+"</option>",i=0;i<o.length;i++)ontologies_option+="<option> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+o[i]+"</option>"})}),$("#ontologies").html(ontologies_option)},error:function(t){console.log(t)}})}$(document).ready(function(){resetFilters(),getAPIData(),getAuthors(),getLevels(),getTagFamily(),getCourse(),getLanguage(),getOntology(),$("#resources").on("change",function(){"all"==this.value?send_data.author="":send_data.author=this.value,getAPIData()}),$("#levels").on("change",function(){"all"==this.value?send_data.level="":send_data.level=this.value,getAPIData()}),$("#families").on("change",function(){"all"==this.value?send_data.tagproblemtype="":send_data.tagproblemtype=this.value,getAPIData()}),$("#courses").on("change",function(){"all"==this.value?send_data.course="":send_data.course=this.value,getAPIData()}),$("#tags").on("change",function(){"all"==this.value?send_data.concept="":send_data.concept=this.value,getAPIData()}),$("#languages").on("change",function(){"all"==this.value?send_data.language="":send_data.language=this.value,getAPIData()}),$("#ontologies").on("click",function(){"all"==this.value?send_data.ontology="":send_data.ontology=this.value,getAPIData()}),$("#sort_by").on("change",function(){send_data.sort_by=this.value,getAPIData()}),$("#display_all").click(function(){resetFilters(),getAPIData()})}),$("#next").click(function(){let t=$(this).attr("url");t||$(this).prop("all",!0),$(this).prop("all",!1),$.ajax({method:"GET",url:t,success:function(t){putTableData(t)},error:function(t){console.log(t)}})}),$("#previous").click(function(){let t=$(this).attr("url");t||$(this).prop("all",!0),$(this).prop("all",!1),$.ajax({method:"GET",url:t,success:function(t){putTableData(t)},error:function(t){console.log(t)}})});