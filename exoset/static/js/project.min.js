var send_data={};function resetFilters(){$("#ontologies").val("all"),$("#tags").val(""),$("#languages").val("all"),$("#courses").val("all"),$("#families").val("all"),$("#levels").val("all"),send_data.ontology="",send_data.concept="",send_data.language="",send_data.course="",send_data.tagproblemtype="",send_data.level="",getAPIData()}function putTableData(t){let e;t.results.length>0?($("#no_results").hide(),$("#list_data").show(),$("#listing").html(""),$.each(t.results,function(t,o){var l=o.slug;e="<tr> <td style='width: 13%' title=\""+o.title+'">'+o.title.slice(0,50)+"...</td><td style='width: 13%'>"+o.family_problem+"</td><td style='width: 18%'>"+o.ontology_path+"</td><td style='width: 11%'>"+o.tag_concept+"</td><td style='width: 13%'>"+o.related_courses+"</td><td style='width: 8%'>"+o.tag_level+"</td><td style='width: 15%'>"+o.prerequisite_assigned+"</td><td style='width: 20%'>"+o.tag_question_type+"</td><td style='width: 4%'> <a href=\""+l+'">Voir</a></td></tr>',$("#listing").append(e)})):($("#no_results h5").html("No results found"),$("#list_data").hide(),$("#no_results").show());let o=t.previous,l=t.next;null===o?($("#previous").addClass("disabled"),$("#previous").prop("disabled",!0)):($("#previous").removeClass("disabled"),$("#previous").prop("disabled",!1)),null===l?($("#next").addClass("disabled"),$("#next").prop("disabled",!0)):($("#next").removeClass("disabled"),$("#next").prop("disabled",!1)),$("#previous").attr("url",t.previous),$("#next").attr("url",t.next),$("#result-count span").html(t.count)}function getAPIData(){let t=$("#list_data").attr("url");$.ajax({method:"GET",url:t,data:send_data,beforeSend:function(){$("#no_results h5").html("Loading data...")},success:function(t){putTableData(t)},error:function(t){$("#no_results h5").html("Something went wrong"),$("#list_data").hide()}})}function getAuthors(){let t=$("#resources").attr("url");$.ajax({method:"GET",url:t,data:{},success:function(t){authorss_option="<option value='all' selected>All authors</option>",$.each(t.authors,function(t,e){authorss_option+="<option>"+e+"</option>"}),$("#resources").html(authorss_option)},error:function(t){console.log(t)}})}function getLevels(){let t=$("#levels").attr("url");$.ajax({method:"GET",url:t,data:{},success:function(t){levels_option="<option value='all' selected>All levels</option>",$.each(t.levels,function(t,e){levels_option+="<option>"+e+"</option>"}),$("#levels").html(levels_option)},error:function(t){console.log(t)}})}function getCourse(){let t=$("#courses").attr("url");$.ajax({method:"GET",url:t,data:{},success:function(t){courses_option="<option value='all' selected>All sectors</option>",$.each(t.courses,function(t,e){courses_option+="<option>"+e+"</option>"}),$("#courses").html(courses_option)},error:function(t){console.log(t)}})}function getTagFamily(){let t=$("#families").attr("url");$.ajax({method:"GET",url:t,data:{},success:function(t){tag_families_option="<option value='all' selected>All problem types</option>",$.each(t.tag_families,function(t,e){tag_families_option+="<option>"+e+"</option>"}),$("#families").html(tag_families_option)},error:function(t){console.log(t)}})}function getLanguage(){let t=$("#languages").attr("url");$.ajax({method:"GET",url:t,data:{},success:function(t){languagess_option="<option value='all' selected>All languages</option>",$.each(t.languages,function(t,e){languagess_option+="<option>"+e+"</option>"}),$("#languages").html(languagess_option)},error:function(t){console.log(t)}})}function getOntology(){let t=$("#ontologies").attr("url");$.ajax({method:"GET",url:t,data:{},success:function(t){ontologies_option="<option value='all' selected>All Ontologies</option>",$.each(t.ontologies,function(t,e){ontologies_option+="<option>"+t+"</option>",Object.entries(e).forEach(([t,e])=>{ontologies_option+="<option> &nbsp;&nbsp;&nbsp;&nbsp;"+t+"</option>",Object.entries(e).forEach(([t,e])=>{ontologies_option+="<option> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+t+"</option>"})})}),$("#ontologies").html(ontologies_option)},error:function(t){console.log(t)}})}$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip(),resetFilters(),getAPIData(),getLevels(),getTagFamily(),getCourse(),getLanguage(),getOntology(),$("#levels").on("change",function(){"all"==this.value?send_data.level="":send_data.level=this.value,getAPIData()}),$("#families").on("change",function(){"all"==this.value?send_data.tagproblemtype="":send_data.tagproblemtype=this.value,getAPIData()}),$("#courses").on("change",function(){"all"==this.value?send_data.course="":send_data.course=this.value,getAPIData()}),$("#tags").on("change",function(){"all"==this.value?send_data.concept="":send_data.concept=this.value,getAPIData()}),$("#languages").on("change",function(){"all"==this.value?send_data.language="":send_data.language=this.value,getAPIData()}),$("#ontologies").on("click",function(){"all"==this.value?send_data.ontology="":send_data.ontology=this.value,getAPIData()}),$("#sort_by").on("change",function(){send_data.sort_by=this.value,getAPIData()}),$("#display_all").click(function(){resetFilters(),getAPIData()})}),$("#next").click(function(){let t=$(this).attr("url");t||$(this).prop("all",!0),$(this).prop("all",!1),$.ajax({method:"GET",url:t,success:function(t){putTableData(t)},error:function(t){console.log(t)}})}),$("#previous").click(function(){let t=$(this).attr("url");t||$(this).prop("all",!0),$(this).prop("all",!1),$.ajax({method:"GET",url:t,success:function(t){putTableData(t)},error:function(t){console.log(t)}})});